<html>
<head>
<title>Documentation Moodle : Comment utiliser CVS ?</title>
    <link rel="stylesheet" href="docstyles.css" type="TEXT/CSS">
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body bgcolor="#ffffff">
<h1>Utiliser CVS pour acc&eacute;der au code de Moodle et le modifier</h1>
<blockquote> 
  <p>CVS signifie Concurrent Versioning System. C'est une fa&ccedil;on pratique
  stoquer le code source, car elle permet de conserver les versions de
  tous les fichiers de sorte que rien n'est jamais perdu, et que les traces
  de l'utilisation par les diff&eacute;rentes personnes sont conserv&eacute;es. Le
  syst&egrave;me offre en outre la possibilit&eacute; de fusionner le code si deux  ou
  plusieurs personnes travaillent sur un m&ecirc;me fichier. Tout le code et
  toutes les versions sont enregistr&eacute;es sur un serveur central (dans le cas
  de Moodle, sur <a target="_top" href="http://www.sf.net/">Sourceforge</a>).</p>
  <p>Si vous d&eacute;sirez acc&eacute;der &agrave; la version actuelle de Moodle par CVS avec
  un acc&egrave;s en lecture seule, vous n'avez pas besoin de cette page. Il
  vous suffit de suivre les instructions (plus simples) pour CVS sur
  la page <a target="_top" href="http://moodle.org/download">T&eacute;l&eacute;chargement
  de Moodle</a>.</p>
  <p>Pour utiliser l'<a target="_top"
  href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/moodle/moodle/">archive CVS
  de Moodle</a> (en tant que <a target="_top"
  href="http://sourceforge.net/project/memberlist.php?group_id=30935">d&eacute;veloppeur 
  avec acc&egrave;s en &eacute;criture</a>), il vous faut avant tout un
  <a href="http://sourceforge.net/account/register.php">compte sur 
  Sourceforge</a>. Dans les exemples de ce fichier, nous admettrons que votre
  nom d'utilisateur est <strong><font color="#990000">myusername</font></strong>
  et que votre mot de passe est <strong><font color="#990000">mypassword</font></strong>.
  Lisez attentivement les instructions de Sourceforge (en anglais) <a target="_top"
  href="http://sourceforge.net/docman/display_doc.php?docid=768&amp;group_id=1#develhomedir">create
  your CVS home directory</a> - une proc&eacute;dure que vous devez faire pour chaque
  nouveau compte pour l'activer en vue de CVS. Il s'agit en gros de vous connecter
  en ssh &agrave; l'adresse cvs.sourceforge.net.</p>
  <p>D&egrave;s que vous avez un compte Sourceforge actif, contactez
  <a target="_top" href="http://moodle.org/user/view.php?id=1&amp;course=1">Martin Dougiamas</a>
  pour qu'il puisse vous donner les droits en &eacute;criture sur certains dossiers
  de Moodle.</p>
  <p>Pour &eacute;viter de devoir taper <strong><font color="#990000">mypassword</font></strong>
  chaque fois que vous lancez une commande CVS, suivez les 
  <a target="_top" href="http://sourceforge.net/account/editsshkeys.php">instructions de
  Sourceforge pour l'utilisation de clefs d'autorisation</a> (en anglais).
  Cette &eacute;tape n'est pas obligatoire, mais elle rend votre travail avec CVS bien
  plus agr&eacute;able et productive.</p>
  <p>Une fois cela fait, vous devriez avoir toutes les autorisations n&eacute;cessaires,
  et vous pouvez configurer votre machine et t&eacute;l&eacute;charger les sources actuelles
  poiur y travailler. Vous trouverez ci-dessous pour les syst&egrave;mes Unix et Windows.</p>
  <h2>1. Utilisation de CVS sur Unix</h2>
  <blockquote> 
    <p>Le CVS de Sourceforge utilise ssh comme couche de transport pour la s&eacute;curit&eacute;. Vous
    devrez donc configurer ainsi la variable d'environnement CVS_RSH dans votre &laquo;&nbsp;shell&nbsp;&raquo;&nbsp;:</p>
    <blockquote> 
      <pre><strong>setenv CVS_RSH ssh</strong> (pour csh, tcsh, etc.)</pre>
      <pre><strong>export CVS_RSH=ssh</strong> (pour sh, bash, etc.)</pre>
    </blockquote>
    <p>Une possibilit&eacute; est de placer cette commande dans votre .bashrc ou .cshrc
    afin que vous n'ayez pas &agrave; la retaper tout le temps. Ensuite, vous devrez effectuer
    un &laquo;&nbsp;check out&nbsp;&raquo; de Moodle avec la commande ci-dessous (sur une seule ligne)&nbsp;:</p>
    <blockquote> 
      <pre><strong>cvs -z3 -d:ext:myusername@cvs.moodle.sourceforge.net:/cvsroot/moodle co moodle</strong></pre>
    </blockquote>
    <p>Ne tentez pas de lancer cette première commande CVS depuis un dossier de Moodle
    préexistant. Commencez avec un nouveau dossier vide.</p>
    <p>Vous devrez taper <strong><font color="#990000">mypassword</font></strong> 
    pour chaque commande, &agrave; moins que vous ne mettiez en place des <a target="_top"
    href="http://sourceforge.net/account/editsshkeys.php">clefs autoris&eacute;es</a>.</p>
    <p>&Agrave; ce stade, vous devriez avoir un nouveau dossier &laquo;&nbsp;moodle&nbsp;&raquo;. Vous pouvez
    changer son nom et le d&eacute;placer, si vous le voulez. Placez-vous dans ce dossier&nbsp;:</p>
    <blockquote> 
      <pre><strong>cd moodle</strong></pre>
    </blockquote>
    <p>Les toutes derni&egrave;res versions des fichiers de Moodle devrait y &ecirc;tre.
    Vous pouvez modifier les fichiers de votre copie. Pour comparer vos fichiers
    avec ceux du serveur CVS, utilisez cvs diff, par exemple&nbsp;:</p>
    <blockquote> 
      <pre><strong>cvs diff -c config-dist.php
cvs diff -c lang</strong></pre>
    </blockquote>
    <p>Pour r&eacute;cup&eacute;rer les derni&egrave;res mises &agrave; jour de Moodle, tapez&nbsp;:</p>
    <blockquote> 
      <pre><strong>cvs update -dP</strong> </pre>
    </blockquote>
    <p>Pour transf&eacute;rer vos nouveaux fichiers sur le serveur, vous devrez taper
    quelque chose comme&nbsp;:</p>
    <blockquote> 
      <pre><strong>cd lang/fr 
cvs commit</strong> </pre>
    </blockquote>
    <p>Vous devrez taper un commentaire. Votre &eacute;diteur de texte s'ouvrira.
    &Eacute;crivez quelque chose qui ait un sens et fermer l'&eacute;diteur de texte. Les
    fichiers seront envoy&eacute;s chez Sourceforge et enregistr&eacute;s. C'est tout !</p>
    <p>Pour vous &eacute;conomiser du temps, vous pouvez placer les arguments
    par d&eacute;faut dans un fichier appel&eacute; .cvsrc dans votre r&eacute;pertoire de d&eacute;part.
    Par exemple, le mien contient&nbsp;:</p>
    <blockquote> 
      <pre><strong>diff -c 
update -dP</strong> </pre>
    </blockquote>
    <p>Taper &laquo;&nbsp;cvs help&nbsp;&raquo; pour plus de d&eacute;tails ... </p>
    <p>&nbsp;</p>
  </blockquote>
  <h2>2. Utilisation de CVS sous Windows</h2>
  <blockquote> 
    <p>First, you need to download a completely fresh copy of Moodle using your 
      developer account.</p>
    <blockquote> 
      <p> 1. Get TortoiseCVS from <a target="_top" href="http://www.tortoisecvs.org/">tortoisecvs.org</a> 
        and install it, then reboot.<br />
        <br />
        2. Find or create a new folder somewhere where you want Moodle to be downloaded 
        to.<br />
        <br />
        3. Right-mouse-click that folder and choose &quot;<strong>CVS Checkout</strong>&quot; 
        from the menu. You should see a dialog box.<br />
        <br />
        4. Copy this text into the CVSROOT field (using your own username!):</p>
      <blockquote> 
        <pre> :ext:<font color="#990000">myusername</font>@cvs.moodle.sourceforge.net:/cvsroot/moodle</pre>
      </blockquote>
      <p><br />
        5. Press the button: &quot;<strong>Fetch list...</strong>&quot;.<br />
        <br />
        6. To the right of the button you should see a list of modules: choose 
        &quot;<strong>moodle</strong>&quot; from that list.<br />
        <br />
        7. Press the button: &quot;<strong>OK</strong>&quot; and everything should 
        be downloaded.<br />
      </p>
    </blockquote>
    <p>A dialog box should show all the files being downloaded, and after a while 
      you should have a complete copy of Moodle. After this first checkout, you 
      can fetch the latest updated files from the CVS server:</p>
    <blockquote> 
      <p> 1. Right-mouse-click on your Moodle folder (or any file) and select 
        &quot;<strong>CVS Update</strong>&quot;. <br />
      </p>
    </blockquote>
    <p>After modifying files (you will note they change from green top red!), 
      you can commit them back to the CVS server like this:</p>
    <blockquote> 
      <p> 1. Right-mouse-click on your Moodle folder (or any file) and select 
        &quot;<strong>CVS Commit...</strong>&quot;.<br />
        <br />
        2. In the dialog box, type a clear description of the changes you are 
        committing. <br />
        <br />
        3. Click &quot;OK&quot;. Your changes will be sent to the server.<br />
      </p>
    </blockquote>
  </blockquote>
  <p>&nbsp;</p>
  <p align="center">Good luck!</p>
  <p>&nbsp;</p>
</blockquote>
<p align="CENTER"><font size="1"><a href="." target="_top">Moodle Documentation</a></font></p>
<p align="CENTER"><font size="1">Version: $Id$</font></p>
</body>
</html>
