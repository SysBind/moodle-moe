<form action="course.php" method="post">
<div>
<table style="margin-left:auto;margin-right:auto">
    <tr>
        <td>
            <select id="addoutcomes" size="20" name="addoutcomes[]" multiple="multiple">

            <?php
            foreach ($outcomes as $outcome) {
              
                // do not include items already used in course
                if (in_array($outcome->id, array_keys($courseoutcomes))) {
                    continue;  
                }
              
                echo '<option value="'.$outcome->id.'">'.truncate($outcome->fullname, 150).'</option>';
            }
            ?>
            </select>
        </td>
        <td>
            <?php 
                // only show arrows if user has privilages to manage
               if (has_capability('gradereport/outcomes:manage', get_context_instance(CONTEXT_COURSE, $courseid))) { 
            ?>
            <p class="arrow_button">
                <input name="add" id="add" type="submit" value="<?php echo '&nbsp; '.$THEME->rarrow.' &nbsp; &nbsp; '.get_string('add'); ?>" title="<?php print_string('add'); ?>" />
                <br />
                <input name="remove" id="remove" type="submit" value="<?php echo '&nbsp;'.$THEME->larrow.' &nbsp; &nbsp; '.get_string('remove'); ?>" title="<?php print_string('remove'); ?>" />
            </p>
            <?php } ?>
        </td>
        <td>
            <select id="removeoutcomes" size="20" name="removeoutcomes[]" multiple="multiple">
            <?php
            foreach ($courseoutcomes as $courseoutcome) {
                echo '<option value="'.$courseoutcome->id.'">'.truncate($courseoutcome->fullname, 150).'</option>';
            }
            ?>
            </select>
        </td>
    </tr>
</table>

<input name="id" type="hidden" value="<?php echo $courseid?>"/>
</div>
</form>