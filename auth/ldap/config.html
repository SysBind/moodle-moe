<?PHP
    // Initialize vars
    optional_variable($config->ldap_host_url,             "");
    optional_variable($config->ldap_contexts,             "");
    optional_variable($config->ldap_user_attribute,    "");
    optional_variable($config->ldap_search_sub,         "");
    optional_variable($config->ldap_bind_dn,             "");
    optional_variable($config->ldap_bind_pw,             "");
    optional_variable($config->ldap_version,             "2");
    optional_variable($config->ldap_objectclass,         "");
    optional_variable($config->ldap_memberattribute,    "");
    optional_variable($config->ldap_creators,             "");
    optional_variable($config->ldap_create_context,     "");
    optional_variable($config->auth_ldap_expirecheck,         "");
    optional_variable($config->auth_ldap_expireattr,         "");
    optional_variable($config->auth_ldap_expiredaysbefore,         "");
    optional_variable($config->auth_ldap_gracecheck,         "");
    optional_variable($config->auth_ldap_graceattr,         "");
    optional_variable($config->auth_user_create,         "");
    optional_variable($config->auth_user_create,         "");
    optional_variable($config->auth_ldap_forcepasswordchange,         "");
    
    optional_variable($config->auth_user_firstname_updatelocal,     "");
    optional_variable($config->auth_user_firstname_editlock,        "");  
    optional_variable($config->auth_user_firstname_updateremote,    "");                    
    optional_variable($config->auth_user_lastname_updatelocal,         "");
    optional_variable($config->auth_user_lastname_editlock,         "");  
    optional_variable($config->auth_user_lastname_updateremote,     "");  
    optional_variable($config->auth_user_email_updatelocal,         "");
    optional_variable($config->auth_user_email_editlock,             "");  
    optional_variable($config->auth_user_email_updateremote,         ""); 
    optional_variable($config->auth_user_phone1_updatelocal,         "");
    optional_variable($config->auth_user_phone1_editlock,             "");  
    optional_variable($config->auth_user_phone1_updateremote,         ""); 
    optional_variable($config->auth_user_phone2_updatelocal,         "");
    optional_variable($config->auth_user_phone2_editlock,             "");  
    optional_variable($config->auth_user_phone2_updateremote,         ""); 
    optional_variable($config->auth_user_department_updatelocal,     "");
    optional_variable($config->auth_user_department_editlock,         "");  
    optional_variable($config->auth_user_department_updateremote,  ""); 
    optional_variable($config->auth_user_address_updatelocal,         "");
    optional_variable($config->auth_user_address_editlock,             "");  
    optional_variable($config->auth_user_address_updateremote,         ""); 
    optional_variable($config->auth_user_city_updatelocal,             "");
    optional_variable($config->auth_user_city_editlock,             "");  
    optional_variable($config->auth_user_city_updateremote,         ""); 
    optional_variable($config->auth_user_country_updatelocal,         "");
    optional_variable($config->auth_user_country_editlock,             "");  
    optional_variable($config->auth_user_country_updateremote,         ""); 
    optional_variable($config->auth_user_description_updatelocal,     "");
    optional_variable($config->auth_user_description_editlock,         "");  
    optional_variable($config->auth_user_description_updateremote, ""); 
    optional_variable($config->auth_user_lang_updatelocal,             "");
    optional_variable($config->auth_user_lang_editlock,             "");  
    optional_variable($config->auth_user_lang_updateremote,         ""); 
    optional_variable($config->auth_user_idnumber_updatelocal,         "");
    optional_variable($config->auth_user_idnumber_editlock,         "");  
    optional_variable($config->auth_user_idnumber_updateremote,     ""); 

    optional_variable($config->auth_ldap_stdchangepassword,        false); 
    
if (!function_exists('ldap_connect')){ // Is php4-ldap really there?
    print '<p align="center"><font color="red"><strong>Warning:
           The PHP LDAP module does not seem to be present. 
           Please ensure it is installed and enabled.</strong></font></p>';
}
    
?>
<tr>
   <td colspan="2">
        <h2><?php print_string("auth_ldap_server_settings", "auth") ?> </h2>
   </td>
</tr>

<tr valign="top" BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P>ldap_host_url:</TD>
    <TD>
        <INPUT name=ldap_host_url TYPE=text SIZE=30 VALUE="<?php echo $config->ldap_host_url?>">
    <?php  if (isset($err["ldap_host_url"])) formerr($err["ldap_host_url"]); ?>
    </TD>
    <TD>
    <?php  print_string("auth_ldap_host_url","auth") ?>
    </TD>
</TR>

<tr valign="top" BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P>ldap_version:</TD>
    <TD>
    <?php
       $versions[2] = "2";
       $versions[3] = "3";
       choose_from_menu($versions, "ldap_version", $config->ldap_version, "");
       if (isset($err["ldap_version"])) formerr($err["ldap_version"]); 
    ?>
    </TD>
    <TD>
    <?php  print_string("auth_ldap_version","auth") ?>
    </TD>
</TR>

<tr>
   <td colspan="2">
        <h2><?php print_string("auth_ldap_bind_settings", "auth") ?> </h2>
   </td>
</tr>


<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P>ldap_bind_dn:</TD>
    <TD>
    <INPUT name=ldap_bind_dn TYPE=text SIZE=30 VALUE="<?php echo $config->ldap_bind_dn?>">
    <?php  if (isset($err["ldap_bind_dn"])) formerr($err["ldap_bind_dn"]); ?>
    </TD><TD>
    <?php  print_string("auth_ldap_bind_dn","auth") ?>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P>ldap_bind_pw:</TD>
    <TD>
    <INPUT name=ldap_bind_pw TYPE=text SIZE=30 VALUE="<?php echo $config->ldap_bind_pw?>">
    <?php  if (isset($err["ldap_bind_pw"])) formerr($err["ldap_bind_pw"]); ?>
    </TD><TD>
    <?php  print_string("auth_ldap_bind_pw","auth") ?>
    </TD>
</TR>


<tr>
   <td colspan="2">
        <h2><?php print_string("auth_ldap_user_settings", "auth") ?> </h2>
   </td>
</tr>


<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P>ldap_user_attribute:</TD>
    <TD>
    <INPUT name=ldap_user_attribute TYPE=text SIZE=30 VALUE="<?php echo $config->ldap_user_attribute?>">
    <?php  if (isset($err["ldap_user_attribute"])) formerr($err["ldap_user_attribute"]); ?>
    </TD>
    <TD>
    <?php  print_string("auth_ldap_user_attribute","auth") ?>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
        <TD ALIGN=RIGHT><P>ldap_memberattribute:</TD>
        <TD>
    <INPUT name=ldap_memberattribute TYPE=text SIZE=30 VALUE="<?php echo $config->ldap_memberattribute?>">
    <?php  if (isset($err["ldap_memberattribute"])) formerr($err["ldap_memberattribute"]); ?>
    </TD><TD>
    <?php  print_string("auth_ldap_memberattribute","auth") ?>
    </TD>
</TR>


<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P>ldap_objectclass:</TD>
    <TD>
    <INPUT name=ldap_objectclass TYPE=text SIZE=30 VALUE="<?php echo $config->ldap_objectclass?>">
    <?php  if (isset($err["ldap_objectclass"])) formerr($err["ldap_objectclass"]); ?>
    </TD>
    <TD>
    <?php  print_string("auth_ldap_objectclass","auth") ?>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P>ldap_contexts:</TD>
    <TD>
    <INPUT name=ldap_contexts TYPE=text SIZE=30 VALUE="<?php echo $config->ldap_contexts?>">
    <?php  if (isset($err["ldap_contexts"])) formerr($err["ldap_contexts"]); ?>
    </TD>
    <TD>
    <?php  print_string("auth_ldap_contexts","auth") ?>
    </TD>
</TR>


<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P>ldap_search_sub:</TD>
    <TD>
    <INPUT name=ldap_search_sub TYPE=text SIZE=1 VALUE="<?php echo $config->ldap_search_sub?>">
    <?php  if (isset($err["ldap_search_sub"])) formerr($err["ldap_search_sub"]); ?>
    </TD>
    <TD>
    <?php  print_string("auth_ldap_search_sub","auth") ?>
    </TD>
<tr>
   <td colspan="2">
        <h2><?php print_string("auth_user_create", "auth") ?> </h2>
   </td>
</tr>

</TR>
<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P>ldap_create_context:</TD>
    <TD>
    <INPUT name=ldap_create_context TYPE=text SIZE=30 VALUE="<?php echo $config->ldap_create_context?>">
    <?php  if (isset($err["ldap_create_context"])) formerr($err["ldap_create_context"]); ?>
    </TD><TD>
    <?php  print_string("auth_ldap_create_context","auth") ?>
    </TD>
</TR>


<tr>
   <td colspan="2">
        <h2><?php print_string("coursecreators") ?> </h2>
   </td>
</tr>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
        <TD ALIGN=RIGHT><P>ldap_creators:</TD>
        <TD>
    <INPUT name=ldap_creators TYPE=text SIZE=30 VALUE="<?php echo $config->ldap_creators?>">
    <?php  if (isset($err["ldap_creators"])) formerr($err["ldap_creators"]); ?>
    </TD><TD>
    <?php  print_string("auth_ldap_creators","auth") ?>
    </TD>
</TR>
<tr>
   <td colspan="2">
        <h2><?php print_string("auth_data_mapping", "auth") ?> </h2>
   </td>
</tr>


<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("firstname") ?>:</TD>
    <TD>
    <INPUT name="auth_user_firstname" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_firstname?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_firstname_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_firstname_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_firstname_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_firstname_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_firstname_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_firstname_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_firstname_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_firstname_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_firstname_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
    <TD rowspan=12 VALIGN=TOP>
    <?php  print_string("auth_ldapextrafields","auth") ?>
    <?php  print_string("auth_updatelocal_expl","auth") ?>
    <?php  print_string("auth_editlock_expl","auth") ?>
    <?php  print_string("auth_updateremote_expl","auth") ?>
    <hr>
    <?php  print_string("auth_updateremote_ldap","auth") ?>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("lastname") ?>:</TD>
    <TD>
    <INPUT name="auth_user_lastname" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_lastname?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_lastname_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_lastname_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_lastname_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock","auth") ?>
    <SELECT NAME="auth_user_lastname_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_lastname_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_lastname_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_lastname_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_lastname_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_lastname_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("email") ?>:</TD>
    <TD>
    <INPUT name="auth_user_email" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_email?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_email_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_email_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_email_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_email_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_email_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_email_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_email_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_email_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_email_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("phone") ?> 1:</TD>
    <TD>
    <INPUT name="auth_user_phone1" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_phone1?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_phone1_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_phone1_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_phone1_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_phone1_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_phone1_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_phone1_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_phone1_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_phone1_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_phone1_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("phone") ?> 2:</TD>
    <TD>
    <INPUT name="auth_user_phone2" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_phone2?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_phone2_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_phone2_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_phone2_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_phone2_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_phone2_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_phone2_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_phone2_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_phone2_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_phone2_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("department") ?>:</TD>
    <TD>
    <INPUT name="auth_user_department" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_department?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_department_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_department_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_department_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_department_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_department_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_department_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_department_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_department_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_department_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("address") ?>:</TD>
    <TD>
    <INPUT name="auth_user_address" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_address?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_address_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_address_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_address_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_address_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_address_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_address_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_address_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_address_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_address_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("city") ?>:</TD>
    <TD>
    <INPUT name="auth_user_city" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_city?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_city_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_city_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_city_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_city_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_city_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_city_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_city_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_city_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_city_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("country") ?>:</TD>
    <TD>
    <INPUT name="auth_user_country" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_country?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_country_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_country_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_country_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_country_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_country_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_country_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_country_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_country_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_country_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("description") ?>:</TD>
    <TD>
    <INPUT name="auth_user_description" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_description?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_description_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_description_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_description_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_description_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_description_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_description_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_description_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_description_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_description_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("idnumber") ?>:</TD>
    <TD>
    <INPUT name="auth_user_idnumber" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_idnumber?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_idnumber_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_idnumber_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_idnumber_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_idnumber_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_idnumber_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_idnumber_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_idnumber_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_idnumber_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_idnumber_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("language") ?>:</TD>
    <TD>
    <INPUT name="auth_user_lang" TYPE="text" SIZE="30" VALUE="<?php echo $config->auth_user_lang?>">
    <DIV ALIGN="right">
    <?php  print_string("auth_updatelocal", "auth") ?>
    <SELECT NAME="auth_user_lang_updatelocal">
        <OPTION VALUE="0" <?php echo ($config->auth_user_lang_updatelocal ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_lang_updatelocal ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>
    <?php  print_string("auth_editlock", "auth") ?>
    <SELECT NAME="auth_user_lang_editlock">
        <OPTION VALUE="0" <?php echo ($config->auth_user_lang_editlock ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_lang_editlock ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    <?php  print_string("auth_updateremote", "auth") ?>
    <SELECT NAME="auth_user_lang_updateremote">
        <OPTION VALUE="0" <?php echo ($config->auth_user_lang_updateremote ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_user_lang_updateremote ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>    
    </DIV>
    </TD>
</TR>


<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT><P><?php  print_string("instructions", "auth") ?>:</TD>
    <TD>
    <TEXTAREA NAME=auth_instructions COLS=30 ROWS=10 WRAP=virtual><?php  p($config->auth_instructions) ?></TEXTAREA> 
    </TD>
    <TD>
    <?php  print_string("authinstructions","auth") ?>
    <?php  helpbutton("text", get_string("helptext")) ?>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT VALIGN=TOP><P><?php  print_string('forcechangepassword', 'auth') ?>:</P></TD>
    <TD>

    <SELECT NAME="auth_ldap_forcechangepassword">
        <OPTION VALUE="0" <?php echo ($config->auth_ldap_forcechangepassword ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_ldap_forcechangepassword ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>

    </TD>
    <TD ALIGN=LEFT VALIGN=TOP>
        <P><?php  print_string('forcechangepassword_help', 'auth') ?></P>
    </TD>
</TR>

<TR VALIGN=TOP BGCOLOR="<?php echo $THEME->cellheading2 ?>">
    <TD ALIGN=RIGHT VALIGN=TOP><P><?php  print_string('stdchangepassword', 'auth') ?>:</P></TD>
    <TD>

    <SELECT NAME="auth_ldap_stdchangepassword">
        <OPTION VALUE="0" <?php echo ($config->auth_ldap_stdchangepassword ? '' : 'SELECTED="yes"') ?> >
            <?php  print_string("no")  ?></OPTION>
        <OPTION VALUE="1" <?php echo ($config->auth_ldap_stdchangepassword ? 'SELECTED="yes"' : '') ?> >
            <?php  print_string("yes") ?></OPTION>
    </SELECT><BR>

    </TD>
    <TD ALIGN=LEFT VALIGN=TOP>
        <P><?php  print_string('stdchangepassword_expl', 'auth') ?></P>
        <P><?php  print_string('stdchangepassword_explldap', 'auth') ?></P>
    </TD>
</TR>
