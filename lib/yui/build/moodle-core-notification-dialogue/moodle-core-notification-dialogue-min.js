YUI.add("moodle-core-notification-dialogue",function(e,t){var n,r,i,s,o,u,a,f;n="moodle-dialogue",r="notificationBase",i=0,s="yesLabel",o="noLabel",u="title",a="question",f={BASE:"moodle-dialogue-base",WRAP:"moodle-dialogue-wrap",HEADER:"moodle-dialogue-hd",BODY:"moodle-dialogue-bd",CONTENT:"moodle-dialogue-content",FOOTER:"moodle-dialogue-ft",HIDDEN:"hidden",LIGHTBOX:"moodle-dialogue-lightbox"},M.core=M.core||{};var l="Moodle dialogue",c;c=function(t){i++;var n="moodle-dialogue-"+i,r=!1,s;t.srcNode&&(r=t.srcNode),t.notificationBase=e.Node.create('<div class="'+f.BASE+'">').append(e.Node.create('<div id="'+n+'" role="dialog" aria-labelledby="'+n+'-header-text" class="'+f.WRAP+'"></div>').append(e.Node.create('<div id="'+n+'-header-text" class="'+f.HEADER+' yui3-widget-hd"></div>')).append(e.Node.create('<div class="'+f.BODY+' yui3-widget-bd"></div>')).append(e.Node.create('<div class="'+f.FOOTER+' yui3-widget-ft"></div>'))),e.one(document.body).append(t.notificationBase),t.additionalBaseClass&&t.notificationBase.addClass(t.additionalBaseClass),t.srcNode="#"+n,t.width=t.width||"400px",t.visible=t.visible||!1,t.center=t.centered||!0,t.centered=!1,t.COUNT=i,t.width==="auto"&&delete t.width,t.lightbox!==!1&&(t.modal=!0),delete t.lightbox,t.closeButton===!1?t.buttons=null:t.buttons=[{section:e.WidgetStdMod.HEADER,classNames:"closebutton",action:function(){this.hide()}}],r&&(s=e.one(r),s.get("parentNode").removeChild(s),e.one("#"+n+" ."+f.BODY).append(s)),c.superclass.constructor.apply(this,[t]),t.closeButton!==!1&&this.get("buttons").header[0].setAttribute("title",this.get("closeButtonTitle"))},e.extend(c,e.Panel,{_resizeevent:null,_orientationevent:null,initializer:function(){var e,t,n;this.after("visibleChange",this.visibilityChanged,this),this.render(),this.show(),this.set("COUNT",i),e=this.get("boundingBox"),e.setStyle("zIndex",null),t=this.get("extraClasses").split(" "),n=t.pop();while(typeof n!="undefined")e.addClass(n),n=t.shift()},visibilityChanged:function(t){var n;t.attrName==="visible"&&(this.get("maskNode").addClass(f.LIGHTBOX),t.prevVal&&!t.newVal&&(this._resizeevent&&(this._resizeevent.detach(),this._resizeevent=null),this._orientationevent&&(this._orientationevent.detach(),this._orientationevent=null)),this.get("center")&&!t.prevVal&&t.newVal&&this.centerDialogue(),this.get("draggable")&&(n="#"+this.get("id")+" ."+f.HEADER,this.plug(e.Plugin.Drag,{handles:[n]}),e.one(n).setStyle("cursor","move")))},centerDialogue:function(){var t=this.get("boundingBox"),r=t.hasClass(n+"-hidden"),i,s,o;r&&t.setStyle("top","-1000px").removeClass(n+"-hidden"),this.get("fullscreen")?(e.UA.ie>0?e.one("html").setStyle("overflow","hidden"):e.one("body").setStyle("overflow","hidden"),t.addClass(n+"-fullscreen"),t.setStyle("left","0px").setStyle("top","0px").setStyle("width","100%").setStyle("height","100%").setStyle("overflow","auto"),i=e.one("#"+this.get("id")+" ."+f.BODY),i.setStyle("overflow","auto"),window.scrollTo(0,0)):(this.get("responsive")&&(t.removeClass(n+"-fullscreen").setStyle("overflow","inherit").setStyle("width",this.get("width")).setStyle("height",this.get("height")),i=e.one("#"+this.get("id")+" ."+f.BODY),i.setStyle("overflow","inherit"),e.UA.ie>0?e.one("html").setStyle("overflow","auto"):e.one("body").setStyle("overflow","auto")),s=Math.max(Math.round((t.get("winWidth")-t.get("offsetWidth"))/2),15),o=Math.max(Math.round((t.get("winHeight")-t.get("offsetHeight"))/2),15)+e.one(window).get("scrollTop"),t.setStyle("left",s).setStyle("top",o)),r&&t.addClass(n+"-hidden")},hide:function(){return e.UA.ie>0?e.one("html").setStyle("overflow","auto"):e.one("body").setStyle("overflow","auto"),this.set("visible",!1)}},{NAME:l,CSS_PREFIX:n,ATTRS:{notificationBase:{},lightbox:{validator:e.Lang.isBoolean,value:!0},closeButton:{validator:e.Lang.isBoolean,value:!0},closeButtonTitle:{validator:e.Lang.isString,value:"Close"},center:{validator:e.Lang.isBoolean,value:!0},draggable:{validator:e.Lang.isBoolean,value:!1},COUNT:{value:0},responsive:{validator:e.Lang.isBoolean,value:!0},responsiveWidth:{value:768},extraClasses:{validator:e.Lang.isString,value:""},fullscreen:{getter:function(){return this.get("responsive")&&Math.floor(e.one(document.body).get("winWidth"))<this.get("responsiveWidth")}}}}),M.core.dialogue=c},"@VERSION@",{requires:["base","node","panel","event-key","dd-plugin"]});
